pipeline {
    agent any
    
    stages {
        stage('github login'){
            steps{
                git credentialsId: 'github', url: 'https://github.com/singhchandrapal24/docker.git', branch: 'main'
            }
        }
        
        stage('check'){
            steps{
                sh 'pwd'
                sh 'ls -l'
                
            }
        }
        
        stage('Docker Build dotnet') {
    	   agent any
            steps {
               sh "pwd"
               dir('/var/jenkins_home/workspace/docker/dotnet/aspnetcoreapp') {
                 sh "pwd"
                 sh "ls -l"
                 sh 'docker build -t chandu/dotnet:1 .'
               }
               
               
      	       
            }
        }
        
        stage('Docker Push dotnet') {
    	     agent any
            steps {
      	       withCredentials([usernamePassword(credentialsId: 'docker', passwordVariable: 'dockerPassword', usernameVariable: 'dockerUser')]) {
        	   sh "docker login -u ${env.dockerUser} -p ${env.dockerPassword}"
              sh 'docker push chandu/dotnet:1'
              }
            }
        }    
            
            
        stage('Docker Build django') {
    	   agent any
            steps {
               sh "pwd"
               dir('/var/jenkins_home/workspace/docker/djangokubernetesproject') {
                 sh "pwd"
                 sh "ls -l"
                 sh 'docker build -t chandu/django:1 .'
               }
               
               
      	       
            }
        }
        
        stage('Docker Push django') {
    	     agent any
            steps {
      	       withCredentials([usernamePassword(credentialsId: 'docker', passwordVariable: 'dockerPassword', usernameVariable: 'dockerUser')]) {
        	   sh "docker login -u ${env.dockerUser} -p ${env.dockerPassword}"
              sh 'docker push chandu/django:1'
              }
            }
        
        }
    }
}
